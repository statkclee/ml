<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Software Carpentry: xwMOOC 기계학습</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="alternate" type="application/rss+xml" title="Software Carpentry Blog" href="http://software-carpentry.org/feed.xml"/>
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-59802572-17', 'auto');
      ga('send', 'pageview');
    
    </script>
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="http://software-carpentry.org" title="Software Carpentry">
          <img alt="Software Carpentry banner" src="img/software-carpentry-banner.png" />
        </a>
      </div>
      <article>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
                    <a href="index.html"><h1 class="title">xwMOOC 기계학습</h1></a>
          <h2 class="subtitle">R 조합수학(Combinatorics)</h2>
          <section class="objectives panel panel-warning">
<div class="panel-heading">
<h2 id="핵심-개념"><span class="glyphicon glyphicon-certificate"></span>핵심 개념</h2>
</div>
<div class="panel-body">
<ul>
<li><strong>순열(permutation):</strong>특정 순서로 정렬</li>
<li><strong>순서를 갖는 표본 vs. 순서 없는 표본:</strong> 순서를 갖는 표본에서 표본의 원소 순서가 중요하다; 예를 들어, 핸드폰 번호, 단어의 글자. 순서를 갖지 않는 표본에서 원소의 순서는 관계가 없다; 예를 들어, 로또 번호, 샐러드에 포함된 야채.</li>
<li><strong>복원 표본 vs. 비복원 표본:</strong> 복원 추출의 경우 동일원소 반복이 허용되는 경우(자동차 번호판 숫자); 로또 번호를 추출하는 경우 반복이 허용되지 않는다. 번호가 뽑혀지면, 다시 추출할 수는 없다.</li>
</ul>
</div>
</section>
<p><span class="math inline">\(n=4\)</span>, 문자 “a”, “b”, “c”, “d”, 4개를 갖는 사례를 갖고 계산하는 것을 살펴본다. 순열과 조합에 대한 갯수를 계산하는 공식이 주어지고 표본을 추출해 해는 접근법을 제시한다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(DescTools)

x &lt;-<span class="st"> </span>letters[<span class="dv">1</span>:<span class="dv">4</span>]
n &lt;-<span class="st"> </span><span class="kw">length</span>(x)
m &lt;-<span class="st"> </span><span class="dv">2</span></code></pre></div>
<h2 id="기본-숫자-함수-r-combinatorics-desctools-combinatorics">1. 기본 숫자 함수 <a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> <a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a></h2>
<p><code>Base R</code> 에 다른 응용프로그램에는 포함되어 있느나 누락된 일부 함수가 있다. <code>DescTools</code> 팩키지에 <code>Primes(x)</code> 함수가 있어 주어진 숫자 <code>x</code>까지 해당되는 모든 소수(Prime Number)를 반환한다. <code>IsPrime</code> 함수는 인자로 받은 숫자 <code>x</code>가 소수인지 판정한다.</p>
<p><code>Factorize()</code> 함수는 숫자를 소수를 기준으로 쪼개고 나서 밑과 거듭제곱 지수를 반환한다. <code>GCD</code>는 최대공약수(Greatest Common Divisor), <code>LCM</code>은 최소공배수(Least Common multiple)를 각각 계산한다.</p>
<p><code>Primes(n=20)</code> 명령어를 통해 20보다 작은 모든 소수를 출력한다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">Primes</span>(<span class="dt">n=</span><span class="dv">20</span>)</code></pre></div>
<pre class="output"><code>[1]  2  3  5  7 11 13 17 19
</code></pre>
<p><code>IsPrime()</code> 함수를 사용해서 벡터 <code>x</code>, 원소 각각이 소수인지 아닌지 판별해서 참/거짓, TRUE/FALSE 값을 반환한다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">23</span>)
y &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span>:<span class="dv">20</span>, <span class="dv">5</span>)

<span class="kw">IsPrime</span>(y)</code></pre></div>
<pre class="output"><code>[1] FALSE  TRUE FALSE  TRUE FALSE
</code></pre>
<p>정수 n에 대해 소인수 분해를 수행하는데 <code>Factorize()</code> 함수를 사용한다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">Factorize</span>(<span class="dv">77</span>)</code></pre></div>
<pre class="output"><code>$`77`
      p m
[1,]  7 1
[2,] 11 1
</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">Factorize</span>(<span class="dt">n=</span><span class="kw">c</span>(<span class="dv">56</span>, <span class="dv">42</span>))</code></pre></div>
<pre class="output"><code>$`56`
     p m
[1,] 2 3
[2,] 7 1

$`42`
     p m
[1,] 2 1
[2,] 3 1
[3,] 7 1
</code></pre>
<p><code>GCD</code> 함수를 사용해서 인자로 입력받은 숫자에 대한 최대공약수를 계산한다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">GCD</span>(<span class="dv">64</span>, <span class="dv">80</span>, <span class="dv">160</span>)</code></pre></div>
<pre class="output"><code>[1] 16
</code></pre>
<p><code>LCM</code> 함수를 사용해서 최소공배수를 계산한다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">LCM</span>(<span class="dv">10</span>, <span class="dv">4</span>, <span class="dv">12</span>, <span class="dv">9</span>, <span class="dv">2</span>)</code></pre></div>
<pre class="output"><code>[1] 180
</code></pre>
<p><code>Fibonacci</code> 함수를 사용해서 처음부터 12까지 피보나치 숫자를 계산한다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">Fibonacci</span>(<span class="dv">1</span>:<span class="dv">12</span>)</code></pre></div>
<pre class="output"><code> [1]   1   1   2   3   5   8  13  21  34  55  89 144
</code></pre>
<h2 id="n-객체에-대한-순열">2. <code>n</code> 객체에 대한 순열</h2>
<p><code>n</code> 객체에 대해 가능한 순열 갯수는 <span class="math inline">\(n!\)</span> 만큼이 된다. R Base 에 내장된 <code>factorial</code> 함수를 사용해서 전체 순열 갯수를 산출한다. 전체 순열을 데이터셋으로 생성하려면 <code>DescTools</code> 팩키지 <code>Permn</code> 함수를 사용한다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">factorial</span>(n)</code></pre></div>
<pre class="output"><code>[1] 24
</code></pre>
<p><code>Permn()</code> 함수를 사용해서 전체 순열 데이터셋을 생성시킨다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">Permn</span>(x)</code></pre></div>
<pre class="output"><code>      [,1] [,2] [,3] [,4]
 [1,] &quot;a&quot;  &quot;b&quot;  &quot;c&quot;  &quot;d&quot; 
 [2,] &quot;b&quot;  &quot;a&quot;  &quot;c&quot;  &quot;d&quot; 
 [3,] &quot;b&quot;  &quot;c&quot;  &quot;a&quot;  &quot;d&quot; 
 [4,] &quot;a&quot;  &quot;c&quot;  &quot;b&quot;  &quot;d&quot; 
 [5,] &quot;c&quot;  &quot;a&quot;  &quot;b&quot;  &quot;d&quot; 
 [6,] &quot;c&quot;  &quot;b&quot;  &quot;a&quot;  &quot;d&quot; 
 [7,] &quot;b&quot;  &quot;c&quot;  &quot;d&quot;  &quot;a&quot; 
 [8,] &quot;a&quot;  &quot;c&quot;  &quot;d&quot;  &quot;b&quot; 
 [9,] &quot;c&quot;  &quot;a&quot;  &quot;d&quot;  &quot;b&quot; 
[10,] &quot;c&quot;  &quot;b&quot;  &quot;d&quot;  &quot;a&quot; 
[11,] &quot;a&quot;  &quot;b&quot;  &quot;d&quot;  &quot;c&quot; 
[12,] &quot;b&quot;  &quot;a&quot;  &quot;d&quot;  &quot;c&quot; 
[13,] &quot;c&quot;  &quot;d&quot;  &quot;a&quot;  &quot;b&quot; 
[14,] &quot;c&quot;  &quot;d&quot;  &quot;b&quot;  &quot;a&quot; 
[15,] &quot;a&quot;  &quot;d&quot;  &quot;b&quot;  &quot;c&quot; 
[16,] &quot;b&quot;  &quot;d&quot;  &quot;a&quot;  &quot;c&quot; 
[17,] &quot;b&quot;  &quot;d&quot;  &quot;c&quot;  &quot;a&quot; 
[18,] &quot;a&quot;  &quot;d&quot;  &quot;c&quot;  &quot;b&quot; 
[19,] &quot;d&quot;  &quot;a&quot;  &quot;b&quot;  &quot;c&quot; 
[20,] &quot;d&quot;  &quot;b&quot;  &quot;a&quot;  &quot;c&quot; 
[21,] &quot;d&quot;  &quot;b&quot;  &quot;c&quot;  &quot;a&quot; 
[22,] &quot;d&quot;  &quot;a&quot;  &quot;c&quot;  &quot;b&quot; 
[23,] &quot;d&quot;  &quot;c&quot;  &quot;a&quot;  &quot;b&quot; 
[24,] &quot;d&quot;  &quot;c&quot;  &quot;b&quot;  &quot;a&quot; 
</code></pre>
<h2 id="n-객체중에서-복원없이-순서를-갖는-표본크기-m-추출">3. <code>n</code> 객체중에서 복원없이 순서를 갖는 표본크기 <code>m</code> 추출</h2>
<p><code>n</code> 개 서로 다른 원소를 가진 집합에서 대상들을 선택하여 순서 있게 <code>m</code>개 원소를 배열하는 갯수를 계산하는 공식: <span class="math inline">\(n(n-1) \cdots (n-m+1) = \frac{n!}{n-m}! = _{n} P_{m}\)</span></p>
<p>직접 R에서 이를 계산하는 함수가 없어 감마함수(Gamma Function) 항등식을 사용한다. 모든 양의 정수에 대해서 항등식이 성립한다.</p>
<p><span class="math display">\[\Gamma(n) = (n-1)!\]</span></p>
<p><span class="math inline">\(_{n} P_{m}\)</span>을 계산하는데 <code>gamma(n+1)/gamma(n-m+1)</code> 공식을 적용하는데, 오버플로(overflow) 넘침을 방지하기 위해 <code>exp(lgamma(n+1)-lgamma(n-m+1))</code> 공식을 사용한다. <code>DescTools</code> 팩키지에 <code>CombN</code> 함수로 구현되었다. 좀더 간단하게 <code>prod((n-m+1):n)</code> 공식도 가능하다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">CombN</span>(x, m, <span class="dt">ord =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre class="output"><code>[1] 12
</code></pre>
<p>해당되는 전체 순열집합을 뽑아내려면 <code>CombSet()</code> 함수를 사용한다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">CombSet</span>(x, m, <span class="dt">repl=</span><span class="ot">FALSE</span>, <span class="dt">ord=</span><span class="ot">TRUE</span>)</code></pre></div>
<pre class="output"><code>      [,1] [,2]
 [1,] &quot;a&quot;  &quot;b&quot; 
 [2,] &quot;b&quot;  &quot;a&quot; 
 [3,] &quot;a&quot;  &quot;c&quot; 
 [4,] &quot;c&quot;  &quot;a&quot; 
 [5,] &quot;a&quot;  &quot;d&quot; 
 [6,] &quot;d&quot;  &quot;a&quot; 
 [7,] &quot;b&quot;  &quot;c&quot; 
 [8,] &quot;c&quot;  &quot;b&quot; 
 [9,] &quot;b&quot;  &quot;d&quot; 
[10,] &quot;d&quot;  &quot;b&quot; 
[11,] &quot;c&quot;  &quot;d&quot; 
[12,] &quot;d&quot;  &quot;c&quot; 
</code></pre>
<h2 id="n-객체중에서-복원없이-순서를-갖는-않는-표본크기-m-추출">4. <code>n</code> 객체중에서 복원없이 순서를 갖는 않는 표본크기 <code>m</code> 추출</h2>
<p><code>n</code> 개 서로 다른 원소를 가진 집합에서 대상들을 선택하여 순서없이 <code>m</code>개 원소를 배열하는 갯수를 계산하는 공식: <span class="math inline">\(\binom{n}{m} = \frac{ _{n}P_{m}} {m!} = \frac{n(n-1) \cdots (n-m+1)}{m!} = \frac{n!}{m!(n-m)!}\)</span></p>
<p><code>choose()</code> 함수가 계산을 수행한다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">choose</span>(n, m)</code></pre></div>
<pre class="output"><code>[1] 6
</code></pre>
<p>해당되는 전체 순열집합을 뽑아내려면 <code>CombSet()</code> 함수를 사용하는데, 인자를 조정한다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">CombSet</span>(x, m, <span class="dt">repl=</span><span class="ot">FALSE</span>, <span class="dt">ord=</span><span class="ot">FALSE</span>)</code></pre></div>
<pre class="output"><code>     [,1] [,2]
[1,] &quot;a&quot;  &quot;b&quot; 
[2,] &quot;a&quot;  &quot;c&quot; 
[3,] &quot;a&quot;  &quot;d&quot; 
[4,] &quot;b&quot;  &quot;c&quot; 
[5,] &quot;b&quot;  &quot;d&quot; 
[6,] &quot;c&quot;  &quot;d&quot; 
</code></pre>
<h2 id="n-객체중에서-복원가능하며-순서를-갖는-표본크기-m-추출">5. <code>n</code> 객체중에서 복원가능하며, 순서를 갖는 표본크기 <code>m</code> 추출</h2>
<p><code>n</code> 개 서로 다른 원소를 가진 집합에서 복원을 허락하여 대상들을 선택하여 순서있게 <code>m</code>개 원소를 배열하는 갯수를 계산하는 공식: <span class="math inline">\(n^m\)</span>.</p>
<p>R에서 <code>n^m</code> 명령어를 입력하여 수행한다. 해당되는 전체 순열집합을 뽑아내려면 <code>CombSet()</code> 함수를 사용하는데, 인자를 적절히 조정한다. 내부적으로 R Base에 내장된 <code>expand.grid()</code>, <code>replicate()</code> 함수를 사용한다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">n^m</code></pre></div>
<pre class="output"><code>[1] 16
</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">CombN</span>(x, m, <span class="dt">repl=</span><span class="ot">TRUE</span>, <span class="dt">ord=</span><span class="ot">TRUE</span>)</code></pre></div>
<pre class="output"><code>[1] 16
</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">CombSet</span>(x, m, <span class="dt">repl=</span><span class="ot">TRUE</span>, <span class="dt">ord=</span><span class="ot">TRUE</span>)</code></pre></div>
<pre class="output"><code>      [,1] [,2]
 [1,] &quot;a&quot;  &quot;a&quot; 
 [2,] &quot;b&quot;  &quot;a&quot; 
 [3,] &quot;c&quot;  &quot;a&quot; 
 [4,] &quot;d&quot;  &quot;a&quot; 
 [5,] &quot;a&quot;  &quot;b&quot; 
 [6,] &quot;b&quot;  &quot;b&quot; 
 [7,] &quot;c&quot;  &quot;b&quot; 
 [8,] &quot;d&quot;  &quot;b&quot; 
 [9,] &quot;a&quot;  &quot;c&quot; 
[10,] &quot;b&quot;  &quot;c&quot; 
[11,] &quot;c&quot;  &quot;c&quot; 
[12,] &quot;d&quot;  &quot;c&quot; 
[13,] &quot;a&quot;  &quot;d&quot; 
[14,] &quot;b&quot;  &quot;d&quot; 
[15,] &quot;c&quot;  &quot;d&quot; 
[16,] &quot;d&quot;  &quot;d&quot; 
</code></pre>
<h2 id="n-객체중에서-복원가능하며-순서를-갖지-않는-표본크기-m-추출">6. <code>n</code> 객체중에서 복원가능하며, 순서를 갖지 않는 표본크기 <code>m</code> 추출</h2>
<p><code>n</code> 개 서로 다른 원소를 가진 집합에서 복원을 허락하여 대상들을 선택하여 순서없이 <code>m</code>개 원소를 배열하는 갯수를 계산하는 공식: <span class="math inline">\({n+m-1 \choose m} = \frac{(n+m-1)!}{m! (n-1)!}\)</span></p>
<p><code>choose()</code> 함수를 사용하는데 적절한 인자값을 넘겨 계산한하다. 해당되는 전체 순열집합을 뽑아내려면 <code>CombSet()</code> 함수를 사용하는데, 내부적으로는 앞서 계산한 복원이 허락되고 순서를 갖는 표본집합을 갖고, 중복을 제거하고 유일무이한 하위집합만 뽑아내서 이를 반환한다. <code>CombSet()</code> 함수에 캡슐화되어 구현되어 있어 플래그만 변경하면 된다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">choose</span>(n +<span class="st"> </span>m -<span class="dv">1</span>, m)</code></pre></div>
<pre class="output"><code>[1] 10
</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">CombN</span>(x, m, <span class="dt">repl=</span><span class="ot">TRUE</span>, <span class="dt">ord=</span><span class="ot">FALSE</span>)</code></pre></div>
<pre class="output"><code>[1] 10
</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">CombSet</span>(x, m, <span class="dt">repl=</span><span class="ot">TRUE</span>, <span class="dt">ord=</span><span class="ot">FALSE</span>)</code></pre></div>
<pre class="output"><code>      [,1] [,2]
 [1,] &quot;a&quot;  &quot;a&quot; 
 [2,] &quot;a&quot;  &quot;b&quot; 
 [3,] &quot;a&quot;  &quot;c&quot; 
 [4,] &quot;a&quot;  &quot;d&quot; 
 [5,] &quot;b&quot;  &quot;b&quot; 
 [6,] &quot;b&quot;  &quot;c&quot; 
 [7,] &quot;b&quot;  &quot;d&quot; 
 [8,] &quot;c&quot;  &quot;c&quot; 
 [9,] &quot;c&quot;  &quot;d&quot; 
[10,] &quot;d&quot;  &quot;d&quot; 
</code></pre>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p><a href="http://www.di.fc.ul.pt/~jpn/r/combinatorics/combinatorics.html">R Combinatorics</a><a href="#fnref1">↩</a></p></li>
<li id="fn2"><p><a href="https://cran.r-project.org/web/packages/DescTools/vignettes/Combinatorics.pdf">DescTools - Combinatorics</a><a href="#fnref2">↩</a></p></li>
</ol>
</div>
        </div>
      </div>
      </article>
      <div class="footer">
        <a class="label swc-blue-bg" href="http://software-carpentry.org">Software Carpentry</a>
        <a class="label swc-blue-bg" href="https://github.com/swcarpentry/lesson-template">Source</a>
        <a class="label swc-blue-bg" href="mailto:admin@software-carpentry.org">Contact</a>
        <a class="label swc-blue-bg" href="LICENSE.html">License</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
  </body>
</html>
